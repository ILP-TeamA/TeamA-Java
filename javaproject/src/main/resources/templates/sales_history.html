<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>売上データ履歴</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; margin: 0; padding: 30px; }
        h1 { color: #495057; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 30px; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        th, td { padding: 12px; border-bottom: 1px solid #e9ecef; text-align: center; }
        th { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        tr:hover { background: #f1f3f5; }
        .total-row th { background: #f8f9fa; color: #495057; font-size: 1.1em; }
        .date-form { margin-bottom: 30px; }
        .date-form label { font-weight: bold; margin-right: 10px; }
        .date-form input[type="date"] { padding: 6px 12px; border-radius: 6px; border: 1px solid #e9ecef; }
        .date-form button { padding: 6px 18px; border-radius: 6px; border: none; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-weight: bold; cursor: pointer; margin-left: 10px; }
        .date-form button:hover { background: linear-gradient(45deg, #5561b3, #6f4c91); }
    </style>
</head>
<body>
    <h1>売上データ履歴</h1>
    <!-- 日付選択フォーム -->
    <form method="get" action="/sales/history" class="date-form">
        <label for="selectedDate">日付を選択：</label>
        <input type="date" id="selectedDate" name="date" th:value="${selectedDate}" required>
        <button type="submit">表示</button>
    </form>

    <div th:if="${salesList != null && !#lists.isEmpty(salesList)}">
        <table>
            <thead>
                <tr>
                    <th>商品名</th>
                    <th>販売数</th>
                    <th>売上額</th>
                    <th>編集</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="record : ${salesList}">
                    <td th:text="${record.productName}"></td>
                    <td th:text="${record.quantity} + '本'"></td>
                    <td th:text="'¥' + #numbers.formatInteger(record.amount, 0, 'COMMA')"></td>
                </tr>
            </tbody>
            <tfoot>
                <tr class="total-row">
                    <th colspan="2" style="text-align:right;">総売上額</th>
                    <th th:text="'¥' + #numbers.formatInteger(${totalAmount}, 0, 'COMMA')"></th>
                </tr>
            </tfoot>
        </table>
    </div>
    <div th:if="${salesList == null or #lists.isEmpty(salesList)}">
        <p>選択した日付の売上データはありません。</p>
    </div>

    <tr th:each="record : ${salesList}">
    <td th:text="${record.productName}"></td>
    <td th:text="${record.quantity} + '本'"></td>
    <td th:text="'¥' + #numbers.formatInteger(record.amount, 0, 'COMMA')"></td>
    <td>
        <a th:href="@{'/sales/edit/' + ${record.salesId}}">編集</a>
    </td>
</tr>
</body>
</html>

